# Automatically generated by apkbuild-pypi, template 3
# Contributor: 
# Maintainer: 
pkgname=py3-imagecodecs
#_pkgreal is used by apkbuild-pypi to find modules at PyPI
_pkgreal=imagecodecs
pkgver=2022.9.26
pkgrel=0
pkgdesc="Image transformation, compression, and decompression codecs"
url="http://packages.python.org/pypi/imagecodecs"
arch="all"
license="BSD"
depends="python3"
checkdepends="
	hdf5-dev
	py3-h5py
	py3-matplotlib
	python3-dev
	"
makedepends="
	blosc-dev
	brunsli-dev
	bzip2-dev
	cfitsio-dev
	charls-dev
	giflib-dev
	jxrlib-dev
	lcms2-dev
	libaec-dev
	libdeflate-dev
	libheif-dev
	libjxl-dev
	libjxl-static
	libpng-dev
	lz4-dev
	openjpeg-dev
	py3-numpy-dev
	py3-setuptools
	py3-wheel
	snappy-dev
	zfp-dev
	zopfli-dev
	"
source="
	https://files.pythonhosted.org/packages/06/4a/06db01040c9ecc251745b104b808f84e1c2cf1eeefb67197a07ea43dce4c/imagecodecs-$pkgver.tar.gz
	setup.patch"
builddir="$srcdir/$_pkgreal-$pkgver"

build() {
	python3 setup.py build -j ${JOBS:-2}
}

# check() {
# 	python3 setup.py test
# }

package() {
	PYTHONPATH=$pkgdir`python3 -c "import site; print(site.getsitepackages()[0])"` \
	python3 setup.py install \
		--prefix=/usr \
		--root="$pkgdir" \
		--single-version-externally-managed
}

sha512sums="
3f1fd8f475e19ec12b52797c58afd49581be495acd59380cd145ed3d60719b55f4cfffaf0a5564595de058b9a3cfb4ff2ec43ed507d0a1cb6c90d7eb7cc9ea48  imagecodecs-2022.9.26.tar.gz
71e08efd56dca9ad555642ecba606ffbeba3bd99b2411f90ededd11a0df7e9d13c234c6b33b79c150707cb8033d2c4008e1d844e57c531e7b24fb0d1736305fb  setup.patch
"
